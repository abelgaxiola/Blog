<?xml version="1.0" encoding="utf-8"?>
<post>
  <title>SQL CE and EF 5.x Code First Approach</title>
  <slug>sql-ce-and-ef-5x-code-first-approach</slug>
  <author>abelgaxiola</author>
  <pubDate>2013-04-23 05:16:12</pubDate>
  <lastModified>2013-04-23 05:16:12</lastModified>
  <excerpt>I needed to create a solution for a demo project hosted in the cloud (web). Visual Studio has some very nice templates for doing some RAD solution but I was determined to use SQL CE for reasons that I won’t get into at this moment</excerpt>
  <content>&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;I needed to create a solution for a demo project hosted in the cloud (web). Visual Studio has some very nice templates for doing some RAD solution but I was determined to use SQL CE for reasons that I won’t get into at this moment. I also won’t get into the discovery process of how long or how hard it was to figure it out. I’ll just say that I hope to save somebody some time and effort by posting my final approach. Here are the steps:&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;1. Create an empty MVC4 project (it doesn’t have to be an empty project this was just quicker and simpler for me).&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;2. Install the NuGet EntityFramework.SqlServerCompact package&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;3. Add the following line of code to the Global.asax.cs Application_Start method:&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;    Database.DefaultConnectionFactory = &lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;            new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0");&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;4. Remove the ConnectionString section from the Web.config file (if it’s there – had different results with VS2010 and VS2012).&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;5. Create the class that is going to be used for the creation of the database and schema (I created mine inside the Models folder). Here is the one I used for testing:&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;public class Comments&lt;br /&gt;{&lt;br /&gt;  [Key]&lt;br /&gt;  public int ID { get; set; }&lt;br /&gt;  [Required]&lt;br /&gt;  public string Message { get; set; }&lt;br /&gt;  public string Date { get; set; }&lt;br /&gt;}&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;6. Add the following using statement to the class just created:&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;    using &lt;/span&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;System.ComponentModel.DataAnnotations;&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;7. Build the project&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;8. Right-click on the Controllers folder and select add controller option.&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;9. Give your controller a name. I named it CommentController&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;10. Select the Template: Controller with read/write actions and views…&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;11. From the Model class drop-down select model class created in step #5&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;12. From the Data context class drop-down select new data context&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;13. Give it a name. I named it CommentContext&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;14. Click on the Add button&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;15. Build and run your application. Add the view to the URL address. Example:&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;     http://localhost:11013/Comment&lt;/span&gt;&lt;/p&gt;&lt;p style="color: rgb(0, 0, 0); font-family: &amp;quot;Times New Roman&amp;quot;; font-size: medium;"&gt;&lt;span style="font-family: arial, helvetica, sans-serif; font-size: small;"&gt;You should now be able to add, edit, and delete items to the SQL CE database. You can view the database and its contents by right-clicking on the App_Data folder of the project and selecting Add Existing Item, then selecting the database that was added to the App_Data folder. If you need to modify the database schema you can double-click on the database to open Server Explorer.&lt;/span&gt;&lt;/p&gt;</content>
  <ispublished>true</ispublished>
  <categories>
    <category>Technical</category>
    <category>Opinion</category>
    <category>Information</category>
  </categories>
  <comments></comments>
</post>