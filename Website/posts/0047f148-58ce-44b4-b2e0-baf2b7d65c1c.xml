<?xml version="1.0" encoding="utf-8"?>
<post>
  <title>Web API and CORS</title>
  <slug>web-api-and-cors</slug>
  <author>abelgaxiola</author>
  <pubDate>2014-08-10 03:50:00</pubDate>
  <lastModified>2014-08-10 03:50:00</lastModified>
  <excerpt>Recently I added a Web API project to an existing Visual Studio MVC solution.  It all went pretty smooth and everything worked as expected all the way to deploying to the DEV webserver environment...</excerpt>
  <content>&lt;span style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;"&gt;Recently I added a Web API project to an existing Visual Studio MVC solution.  It all went pretty smooth and everything worked as expected all the way to deploying to the DEV webserver environment.  What happened was that the RESTfull APIs became inaccessible from my workstation’s MVC project and I had no clue as to the reason why.  After some research it all became pretty clear to me; and it has to do with CORS.  If you haven’t heard about CORS, here is the definition in Wikipedia:&lt;/span&gt;&lt;br style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;br style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;blockquote style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;"&gt;Cross-origin resource sharing (CORS) is a mechanism that allows many resources (e.g., fonts, JavaScript, etc.) on a web page to be requested from another domain outside the domain the resource originated from.&lt;/blockquote&gt;&lt;span style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;"&gt;Here is what I had to do in order to make the Web API services available.  It turns out that there is a NuGet package that install everything you need:&lt;/span&gt;&lt;br style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;img alt="" src="https://web.archive.org/web/20160316164820im_/http://blog.abelgaxiola.com/posts/files/9672c25d-0a6e-477c-a5d1-54ed3312f351.png" style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;br style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;span style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;"&gt;After installing the package I updated the WebApiConfig class located inside the App_Start folder.   I added the System.Web.Http.Cors and the System.Net.Http.Headers namespaces to my  “using” section:&lt;/span&gt;&lt;br style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;br style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;blockquote style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;"&gt;&lt;i&gt;using System.Web.Http;&lt;br /&gt;using System.Web.Http.Cors;&lt;br /&gt;using System.Net.Http.Headers;&lt;/i&gt;&lt;br /&gt;&lt;/blockquote&gt;&lt;span style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;"&gt;I then added the following lines of code to the Register class:&lt;/span&gt;&lt;br style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;br style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;blockquote style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;"&gt;&lt;i&gt;var attr = new EnableCorsAttribute("*", "*", "GET");&lt;br /&gt;&lt;br /&gt;config.EnableCors(attr);&lt;br /&gt;config.Formatters.JsonFormatter&lt;br /&gt;    .SupportedMediaTypes&lt;br /&gt;    .Add(new MediaTypeHeaderValue("text/html"));&lt;/i&gt;&lt;br /&gt;&lt;/blockquote&gt;&lt;span style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;"&gt;And, after building and redeploying everything worked as I had originally expected: &lt;/span&gt;&lt;br style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;br style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;" /&gt;&lt;span style="font-family: Alegreya, georgia, Verdana, Geneva, &amp;quot;DejaVu Sans&amp;quot;, sans-serif; font-size: 22px;"&gt;like magic.&lt;/span&gt;</content>
  <ispublished>true</ispublished>
  <categories>
    <category>Web API</category>
    <category>ASP.NET MVC</category>
    <category>Technical</category>
  </categories>
  <comments></comments>
</post>